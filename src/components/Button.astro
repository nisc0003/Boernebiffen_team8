---
// Enhanced Button Component - supports both square and round variants with SVG color control
const {
  variant = "accent1",
  size = "sm",
  shape = "square",
  stylingclasses = "",
  type = "button",
  svg_accent,
  ...rest
} = Astro.props;

// compute svg_accent default depending on shape/variant
const resolvedSvgAccent = svg_accent ?? (shape === "round" ? variant : "white");

// Base classes for all buttons
const baseClasses =
  "inline-flex items-center justify-center gap-2 font-medium select-none transition-all duration-200 font-display cursor-pointer hover:scale-105 active:scale-95";

// Shape-specific classes
const shapeClasses = {
  square: "rounded-lg",
  round: "rounded-full aspect-square p-0",
};

// Background variant classes
const variantClasses = {
  accent1: "bg-accent-1-400 hover:bg-accent-1-200 active:bg-accent-1-100",
  accent2: "bg-accent-2-400 hover:bg-accent-2-200 active:bg-accent-2-100",
  accent3: "bg-accent-3-400 hover:bg-accent-3-200 active:bg-accent-3-100",
  accent4: "bg-accent-4-400 hover:bg-accent-4-200 active:bg-accent-4-100",
  accent5: "bg-accent-5-400 hover:bg-accent-5-200 active:bg-accent-5-100",
  black: "bg-black",
};

// SVG color control classes
const svg_accentClasses = {
  white:
    "[&_svg_*]:!fill-white hover:[&_svg_*]:!fill-white active:[&_svg_*]:!fill-white [&_svg]:transition-all",
  accent1:
    "[&_svg_*]:!fill-accent-1-200 hover:[&_svg_*]:!fill-accent-1-400 active:[&_svg_*]:!fill-accent-1-500 [&_svg]:transition-all",
  accent2:
    "[&_svg_*]:!fill-accent-2-200 hover:[&_svg_*]:!fill-accent-2-400 active:[&_svg_*]:!fill-accent-2-500 [&_svg]:transition-all",
  accent3:
    "[&_svg_*]:!fill-accent-3-200 hover:[&_svg_*]:!fill-accent-3-400 active:[&_svg_*]:!fill-accent-3-500 [&_svg]:transition-all",
  accent4:
    "[&_svg_*]:!fill-accent-4-200 hover:[&_svg_*]:!fill-accent-4-400 active:[&_svg_*]:!fill-accent-4-500 [&_svg]:transition-all",
  accent5:
    "[&_svg_*]:!fill-accent-5-200 hover:[&_svg_*]:!fill-accent-5-400 active:[&_svg_*]:!fill-accent-5-500 [&_svg]:transition-all",
  none: "",
};

// Size classes - different for square vs round
const sizeClasses = {
  square: {
    sm: "px-6 py-2 text-[1rem]",
    md: "px-8 py-3 text-[1.25rem]",
    lg: "px-12 py-4 text-[1.5rem]",
  },
  round: {
    sm: "w-14 h-14 md:w-16 md:h-16 [&_svg]:w-full [&_svg]:h-full [&_svg]:p-3",
    md: "w-16 h-16 md:w-20 md:h-20 lg:w-24 lg:h-24 [&_svg]:w-full [&_svg]:h-full [&_svg]:p-3 md:[&_svg]:p-4",
    lg: "w-20 h-20 md:w-24 md:h-24 lg:w-32 lg:h-32 [&_svg]:w-full [&_svg]:h-full [&_svg]:p-4 md:[&_svg]:p-6 lg:[&_svg]:p-7",
  },
};
---

<!--Sæt classes for den pågældende knap sammen ved hjælp af Astros class:list -->
<button
  type={type}
  {...rest}
  class:list={[
    baseClasses,
    shapeClasses[shape] ?? "",
    variantClasses[variant] ?? "",
    sizeClasses[shape]?.[size] ?? "",
    svg_accentClasses[resolvedSvgAccent] ?? "",
    // custom classes last so they can override defaults (eg. bg-yellow-300 text-black)
    stylingclasses,
  ]}
>
  <slot name="icon" />
  <slot />
</button>
